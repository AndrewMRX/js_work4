<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Пример 26</title>
</head>
<body>
    <script>

      let n = prompt('Введите число n: ', '');
      let z = 1;

      let res;

      let nIsNum = true;

      let ndots = 0;

        if (n[0] != '\u002D') {

          if (n.length > 2) {
            for (let i = 2; i < n.length; i++) {
              if ( (n[i] < '\u0030' || n[i] > '\u0039') && n[i] != '\u002e' ) { nIsNum = false; }
            }
          }
          if (n[0] < '\u0030' || n[0] > '\u0039') { nIsNum = false; }
          if ((n[1] < '\u0030' || n[1] > '\u0039') && n[1] != '\u002e') { nIsNum = false; }

        }

        if (n[0] == '\u002D') {

          if (n.length > 3) {
            for (let i = 3; i < n.length; i++) {
              if ((n[i] < '\u0030' || n[i] > '\u0039')  && n[i] != '\u002e' ) { nIsNum = false; }
            }
          } else if (n.length == 1) { nIsNum = false; }
          if (n[1] < '\u0030' || n[1] > '\u0039') { nIsNum = false; }
          if ((n[2] < '\u0030' || n[2] > '\u0039') && n[2] != '\u002e') { nIsNum = false; }

        }

        //проверка на 1 точку.
        
        for (let i = 0; i < n.length; i++) {
          if (n[i] == '\u002e') {ndots++;}
        }

        if (ndots > 1) { nIsNum = false; }


        res = (n == '') ? 'Вы не ввели значение.' :
        
          (n < 0) ? 'Вы ввели отрицательное значение.' :

          ( ((n[0] == '\u0030' && n[1] !== '\u002e' && n.length > 1) && (n[0] != '\u002D')) ) ? 'Введите ' +
          'число без ведущих нулей, пожалуйста.' :

          ( ((n[1] == '\u0030' && n[2] !== '\u002e' && n.length > 2) && (n[0] == '\u002D')) ) ? 'Введите ' +
          'число без ведущих нулей, пожалуйста.' :

          (nIsNum == false) ? 'Значение "n" нe является числом, или вы используете пробелы.' :

          ( (n - Math.round(n) != 0) ) ? 'Вы ввели дробное значение.' :
          
          (+n + 1 == Infinity) ? 'Значение "n" превышает максимально допустимое значение для JavaScript' +
          ', приблизительно равное 1.79E+308' :'valid';

      let stopped = false;

      if (res == 'valid') {
        if (n > 1){
          let i = 2;
          do {
            z = z * i;
            i++;

            if(z == Infinity) {
              res = ('Результат, при введённом значении "n", превышает максимально допустимое значение ' +
                'для JavaScript, приблизительно равное 1.79E+308');
                stopped = true;
                break;
            }

          }
          while (i <= +n);
        }
        if(stopped == false){
        res = 'Факториал числа ' + n + ' равен ' + z;
        }
      }
      alert(res);

      /*
  +0 в степени 0 - нет смысла или 1;
  +любое в степени 0 = 1;
  
  +степень дробная - используем др
  +степень отрица - и др
  
  +отриц дроб в отриц дроби == еррор
  
  длина чисел до инфинити.
  111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
  
  89999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999998
  
  2321.232
  23.123
  */
    </script>  
</body>
</html>

