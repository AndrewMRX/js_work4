<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Пример 25</title>
</head>
<body>
    <script>

      let x = prompt('Введите число x: ', '');
      let y = prompt('Введите число y: ', '');
      let z;

      let res;

      let xIsNum = true;
      let yIsNum = true;

      let xdots = 0;
      let ydots = 0;

        if (x[0] != '\u002D') {

          if (x.length > 2) {
            for (let i = 2; i < x.length; i++) {
              if ( (x[i] < '\u0030' || x[i] > '\u0039') && x[i] != '\u002e' ) { xIsNum = false; }
            }
          }
          if (x[0] < '\u0030' || x[0] > '\u0039') { xIsNum = false; }
          if ((x[1] < '\u0030' || x[1] > '\u0039') && x[1] != '\u002e') { xIsNum = false; }

        }

        if (y[0] != '\u002D') {

          if (y.length > 2) {
            for (let i = 2; i < y.length; i++) {
              if ((y[i] < '\u0030' || y[i] > '\u0039')  && y[i] != '\u002e' ) { yIsNum = false; }
            }
          }
          if (y[0] < '\u0030' || y[0] > '\u0039') { yIsNum = false; }
          if ((y[1] < '\u0030' || y[1] > '\u0039') && y[1] != '\u002e') { yIsNum = false; }

        }

        if (x[0] == '\u002D') {

          if (x.length > 3) {
            for (let i = 3; i < x.length; i++) {
              if ((x[i] < '\u0030' || x[i] > '\u0039')  && x[i] != '\u002e' ) { xIsNum = false; }
            }
          } else if (x.length == 1) { xIsNum = false; }
          if (x[1] < '\u0030' || x[1] > '\u0039') { xIsNum = false; }
          if ((x[2] < '\u0030' || x[2] > '\u0039') && x[2] != '\u002e') { xIsNum = false; }

        }

        if (y[0] == '\u002D') {

          if (y.length > 3) {
            for (let i = 3; i < y.length; i++) {
              if ((y[i] < '\u0030' || y[i] > '\u0039')  && x[i] != '\u002e' ) { yIsNum = false; }
            }
          } else if (y.length == 1) { yIsNum = false; }
          if (y[1] < '\u0030' || y[1] > '\u0039') { yIsNum = false; }
          if ((y[2] < '\u0030' || y[2] > '\u0039') && y[2] != '\u002e') { yIsNum = false; }

        }

        //проверка на 1 точку.
        
        for (let i = 0; i < x.length; i++) {
          if (x[i] == '\u002e') {xdots++;}
        }

        if (xdots > 1) { xIsNum = false; }

        for (let i = 0; i < y.length; i++) {
            if (y[i] == '\u002e') { ydots++; }
          }

          if (ydots > 1) { yIsNum = false; }


        res = (x == '' || y == '') ? 'Одно или оба поля оказались пустыми.' :

          (((x[0] == '\u0030' && x[1] !== '\u002e' && x.length > 1) && (x[0] != '\u002D')) ||
           ((y[0] == '\u0030' && y[1] !== '\u002e' && y.length > 1) && (y[0] != '\u002D'))) ? 'Введите ' +
          'числа без ведущих нулей, пожалуйста.' :

          (((x[1] == '\u0030' && x[2] !== '\u002e' && x.length > 2) && (x[0] == '\u002D')) ||
           ((y[1] == '\u0030' && y[2] !== '\u002e' && y.length > 2) && (y[0] == '\u002D'))) ? 'Введите ' +
          'числа без ведущих нулей, пожалуйста.' :

          (xIsNum == false) ? 'Значение "x" нe является числом, или вы используете пробелы.' :
          (yIsNum == false) ? 'Значение "y" нe является числом, или вы используете пробелы.' :
          
          (x == 0 && y == 0) ? 'Выражение "0 в степени 0" не имеет смысла, либо равно 1' :
          (y == 0) ? 'Число ' + x + ' в степени ' + y + ' равно ' + '0' :

          (x == 0 && y < 0) ? 'Число ' + x + ' в степени ' + y + ' равно ' + 'бесконечности.' :

          (x < 0 && (y - Math.round(y) != 0) ) ? 'Не возможно возвести отрицательное число в дробную степень' :

          (+x + 1 == Infinity) ? 'Значение "x" превышает максимально допустимое значение для JavaScript' +
          ', приблизительно равное 1.79E+308' :
          
          (+y + 1 == Infinity) ? 'Значение "y" превышает максимально допустимое значение для JavaScript' +
          ', приблизительно равное 1.79E+308' :'valid';

      if (res == 'valid') {

        if(y < 0 || (y - Math.round(y) != 0)){
        z = ( Math.pow(x, y) );
        //z = (z.toFixed(18));
        if (z == 'Infinity') {
            res = ('Результат, при введённых значениях "x" и "y", превышает максимально допустимое значение ' +
              'для JavaScript, приблизительно равное 1.79E+308');
                             } else {
               res = 'Число ' + x + ' в степени ' + y + ' равно ' + z;}
        } else {
        let stopped = false;
        z = +x;
        i=2;
        while (i <= y) {
         z = z * x;
         if(z == 'Infinity'){
           res = ('Результат, при введённых значениях "x" и "y", превышает максимально допустимое значение ' +
             'для JavaScript, приблизительно равное 1.79E+308');
             stopped = true;
           break;
         }
         i++;
       }
        z = (z.toFixed(18));

        if (stopped == false){
          res = 'Число ' + x + ' в степени ' + y + ' равно ' + z;
        }
       }
      }
      alert(res);

      /*
  +0 в степени 0 - нет смысла или 1;
  +любое в степени 0 = 1;
  
  +степень дробная - используем др
  +степень отрица - и др
  
  +отриц дроб в отриц дроби == еррор
  
  длина чисел до инфинити.
  111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
  
  89999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999998
  
  2321.232
  23.123
  */
    </script>  
</body>
</html>

